#!/bin/bash
# ==============================================================================
# DIRENV CONFIGURATION
# ==============================================================================
# This file is automatically loaded by direnv when entering this directory.
# It loads environment variables from .env files with override precedence.
#
# Installation:
#   macOS:   brew install direnv
#   Ubuntu:  sudo apt install direnv
#   Other:   https://direnv.net/docs/installation.html
#
# Shell Integration (add to ~/.zshrc or ~/.bashrc):
#   eval "$(direnv hook zsh)"   # For zsh
#   eval "$(direnv hook bash)"  # For bash
#
# Usage:
#   1. Copy template: cp .env.example .env
#   2. Edit .env with your local configuration
#   3. Run: direnv allow
#   4. Environment variables are automatically loaded!
#
# Security:
#   - .env.example is committed (template)
#   - .env is gitignored (your local configuration)
# ==============================================================================

# Load .env file if it exists
if [ -f .env ]; then
    echo "ðŸ“„ Loading .env (base configuration)"
    # Use dotenv_if_exists for safer loading
    dotenv_if_exists .env
fi

# Export important paths
export PYTHONPATH="${PWD}:${PYTHONPATH}"

# Debug: Show that direnv is working
echo "âœ… direnv loaded successfully"
echo "   PYTHONPATH: ${PYTHONPATH}"
if [ -n "$APP_NAME" ]; then
    echo "   APP_NAME: ${APP_NAME}"
fi
if [ -n "$APP_ENV" ]; then
    echo "   APP_ENV: ${APP_ENV}"
fi

# Optional: Set default values if not provided
# export APP_NAME="${APP_NAME:-my-python-app}"
# export APP_ENV="${APP_ENV:-dev}"

# ==============================================================================
# DIRENV COMMANDS REFERENCE:
# ==============================================================================
# direnv allow         - Allow .envrc to load (required after changes)
# direnv reload        - Reload environment variables
# direnv deny          - Disable .envrc in this directory
# direnv edit          - Edit .envrc in $EDITOR
# direnv status        - Show current direnv status
# ==============================================================================
